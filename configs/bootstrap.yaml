tenant_id: "495d73d8-09b2-4019-8373-a43ec200f8c3"

github:
  owner: arielmeistel_microsoft
  repo: azure-landing-zones-terraform-modules

# Bootstrap deployment configuration
bootstrap:
  # GitHub Actions deployment
  github_enabled: true     # Enable GitHub Actions deployment
  
  # GitHub configuration (only used if github_enabled = true)
  github:
    use_single_sp: false             # true = one SP for all modules, false = one SP per module type
    use_module_scoped_sp: true       # true = one SP per module type (mg, network, policy)
    use_federated_credentials: true  # Recommended: true = OIDC, false = client secrets
  
  # Key Vault configuration for storing secrets
  key_vault:
    name: "kv-bootstrap-ariel"   # Key Vault name (must be globally unique)
    allowed_ips: ["128.139.196.204", "77.137.76.56"]  # IP addresses allowed to access Key Vault
    allowed_subnets: []      # Subnet IDs allowed to access Key Vault  
    purge_protection: false  # Enable purge protection for production

modules:
  network:
    enabled: true   # set false to skip creating hub/spoke envs for now

  mg:
    enabled: true
    environment: mg
    scope_id: "/providers/Microsoft.Management/managementGroups/495d73d8-09b2-4019-8373-a43ec200f8c3"
    # Subscriptions this MG pipeline can attach/move (grants Owner on each):
    managed_subscriptions:
      - "951bf7d9-1e2b-4897-8ad7-cb06c80e456a"
      - "3b532a46-70cc-4b89-ac02-ed77b7ab8d92"
      - "9c737b64-bb3f-4f77-9728-54ca8ef36583"
      - "b79d5529-469b-4089-a5eb-ede783f663ea"
      - "d630962a-30c4-4133-b38a-5b28d7cf649f"

    # optional login subscription for the provider (defaults to tfstate.subscription_id)
    subscription_id: "d630962a-30c4-4133-b38a-5b28d7cf649f"

  policy:
    enabled: false
    environment: policy
    scope_id: "/providers/Microsoft.Management/managementGroups/495d73d8-09b2-4019-8373-a43ec200f8c3"
    # subscription_id: "bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb"

# Hubs & Spokes are optional and only used if modules.network.enabled = true
hubs:
  - name: hub-westeurope
    subscription_id: "b79d5529-469b-4089-a5eb-ede783f663ea"

spokes:
  - name: spoke1
    subscription_id: "3b532a46-70cc-4b89-ac02-ed77b7ab8d92"
  - name: spoke2
    subscription_id: "951bf7d9-1e2b-4897-8ad7-cb06c80e456a"

# External Terraform state storage (created by create-tfstate-storage.sh script)
# This storage account must be created BEFORE running the bootstrap module
tfstate:
  subscription_id: "d630962a-30c4-4133-b38a-5b28d7cf649f"
  resource_group: rg-tfstate
  location: westeurope
  storage_account: sttfstateariel   # must be globally unique
  container: tfstate
